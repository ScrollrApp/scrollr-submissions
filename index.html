<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Scrollr Submission</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      * {
        box-sizing: border-box;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
      }

      body {
        margin: 0;
        padding: 16px;
        background: #020617;
        color: #e5e7eb;
      }

      .page {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      @media (min-width: 900px) {
        .page {
          flex-direction: row;
          align-items: flex-start;
        }
      }

      .column {
        flex: 1;
        min-width: 0;
      }

      h1 {
        font-size: 24px;
        margin-bottom: 8px;
      }

      .subtitle {
        font-size: 14px;
        color: #9ca3af;
        margin-bottom: 16px;
      }

      form {
        background: #020617;
        padding: 16px;
        border-radius: 12px;
        border: 1px solid #1f2937;
      }

      label {
        display: block;
        font-size: 13px;
        margin-bottom: 4px;
        color: #e5e7eb;
      }

      .field {
        margin-bottom: 12px;
      }

      input[type="text"],
      textarea {
        width: 100%;
        padding: 8px 10px;
        border-radius: 8px;
        background: #020617;
        border: 1px solid #4b5563;
        color: #e5e7eb;
        font-size: 14px;
      }

      input[type="text"]:focus,
      textarea:focus {
        outline: none;
        border-color: #6366f1;
        box-shadow: 0 0 0 1px #6366f1;
      }

      textarea {
        min-height: 120px;
        resize: vertical;
      }

      .small-hint {
        font-size: 11px;
        color: #9ca3af;
        margin-top: 2px;
      }

      button[type="submit"] {
        margin-top: 8px;
        padding: 10px 16px;
        border-radius: 999px;
        border: none;
        background: #6366f1;
        color: white;
        font-weight: 600;
        font-size: 14px;
        cursor: pointer;
      }

      button[type="submit"]:hover {
        filter: brightness(1.1);
      }

      /* Preview side */

      .preview-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
      }

      .phone-frame {
        width: 360px;
        max-width: 100%;
        border-radius: 28px;
        background: #020617;
        border: 2px solid #111827;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.7);
        overflow: hidden;
      }

      .post-container {
        position: relative;
        min-height: 540px;
        padding-top: 10px;
        padding-bottom: calc(45px + 40px);
        padding-left: 16px;
        padding-right: 16px;
      }

      .post-content {
        flex: 1;
      }

      .post-title {
        font-size: 20px;
        font-weight: 700;
        color: #f9fafb;
        margin-bottom: 6px;
      }

      .post-author {
        font-size: 12px;
        color: #9ca3af;
        margin-bottom: 10px;
      }

      .image-wrapper {
        position: relative;
        margin-bottom: 10px;
      }

      .post-image {
        width: 100%;
        height: 140px;
        object-fit: cover;
        border-radius: 10px;
        display: none; /* hidden until a valid src exists */
      }

      .image-credit {
        position: absolute;
        bottom: 6px;
        right: 8px;
        font-size: 10px;
        color: rgba(249, 250, 251, 0.9);
        background-color: rgba(0, 0, 0, 0.5);
        padding: 1px 4px;
        border-radius: 4px;
      }

      .image-credit.hidden {
        display: none;
      }

      .post-body {
        font-size: 14px;
        line-height: 20px;
        color: #e5e7eb;
        margin-bottom: 6px;
        white-space: pre-line;
        word-break: break-word;        /* force-wrap long words */
        overflow-wrap: break-word;     /* modern equivalent */
      }

      .actions-row {
        position: absolute;
        bottom: 45px;
        left: 16px;
        right: 16px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: linear-gradient(to top, rgba(15, 23, 42, 0.95), transparent);
        padding: 8px 10px;
        border-radius: 999px;
      }

      .read-more-btn {
        padding: 6px 14px;
        border-radius: 999px;
        border: 1px solid #f97316;
        background: transparent;
        font-size: 14px;
        font-weight: 600;
        color: #f97316;
      }

      .right-actions {
        display: flex;
        align-items: center;
        gap: 16px;
      }

      .action-button {
        padding: 4px 6px;
        font-size: 14px;
        font-weight: 500;
        color: #e5e7eb;
      }

      .preview-caption {
        font-size: 12px;
        color: #9ca3af;
        text-align: center;
        max-width: 360px;
      }
    </style>
  </head>
  <body>
    <div class="page">
      <!-- LEFT: FORM -->
      <div class="column">
        <h1>Submit a Scrollr Slide</h1>
        <div class="subtitle">
          Fill in the fields; the preview on the right updates live to match the app.
        </div>

        <form
            id="submission-form"
            action="https://docs.google.com/forms/d/e/1FAIpQLSfD8TLkHnJv60bG9Y8p6R11T_Q38XzCCcln7_4TkfT4VJeYvA/formResponse"
            method="POST"
            target="_blank"
        >
          <div class="field">
            <label for="title">Title</label>
            <input
              type="text"
              id="title"
              name="entry.2066321863"    
              placeholder="How to Submit a Scrollr Slide"
              required
            />
          </div>

          <div class="field">
            <label for="authorName">Author</label>
            <input
              type="text"
              id="authorName"
              name="entry.725393047" 
              placeholder="You"
              required
            />
          </div>

          <div class="field">
            <label for="category">Category</label>
            <input
              type="text"
              id="category"
              name="entry.1566350746"
              placeholder="Teaching"
              required
            />
            <div class="small-hint">
              Shown as "Author · Category" under the title.
            </div>
          </div>

          <div class="field">
            <label for="imageUrl">Image URL (optional)</label>
            <input
              type="text"
              id="imageUrl"
              name="entry.282733743"
              placeholder="https://images.pexels.com/..."
            />
            <div class="small-hint">
              Use a direct image link. The preview hides the image if the URL fails to load. Direct image submission will be implemented soon.
            </div>
          </div>

          <div class="field">
            <label for="credit">Image credit (optional)</label>
            <input
              type="text"
              id="credit"
              name="entry.2110708719"
              placeholder="Pexels / Unsplash / author name"
            />
            <div class="small-hint">
              Only shown on the slide if filled in.
            </div>
          </div>

          <div class="field">
            <label for="readMoreUrl">Read more URL</label>
            <input
              type="text"
              id="readMoreUrl"
              name="entry.1617240791"
              placeholder="https://example.com/article"
              required
            />
            <div class="small-hint">
              This could be the link to a paper or website (e.g. Wikipedia as a basic default). A “Read more” button always appears in the bottom-left.
            </div>
          </div>

          <div class="field">
            <label for="body">Body text</label>
            <textarea
              id="body"
              name="entry.1921401744"
              placeholder="Write a short, self-contained explanation of the concept..."
              required
            ></textarea>
            <div class="small-hint">
              Aim for ~50-150 words; long words/URLs will be wrapped automatically.
            </div>
          </div>

          <button type="submit">Submit</button>
          <div class="small-hint">
            (Currently this just blocks submission. You’ll wire it to Google Forms or an API later.)
          </div>
        </form>
      </div>

      <!-- RIGHT: PREVIEW -->
      <div class="column">
        <div class="preview-wrapper">
          <div class="phone-frame">
            <div class="post-container">
              <div class="post-content">
                <h2 id="preview-title" class="post-title">
                  Your title goes here
                </h2>
                <div id="preview-author" class="post-author">
                  Scrollr · Logic
                </div>

                <div class="image-wrapper">
                  <img
                    id="preview-image"
                    class="post-image"
                    alt="Preview"
                  />
                  <div id="preview-credit" class="image-credit hidden">
                    credit: someone
                  </div>
                </div>

                <div id="preview-body" class="post-body">
                  Start typing your explanation on the left. This area will show
                  roughly how much text fits comfortably on a slide.
                </div>
              </div>

              <div class="actions-row">
                <button id="preview-readmore" class="read-more-btn">
                  Read more
                </button>

                <div class="right-actions">
                  <div class="action-button" id="preview-like">
                    ♡ Like
                  </div>
                  <div class="action-button" id="preview-save">
                    ☆ Save
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="preview-caption">
            This uses the same font sizes, colours, and action row offset as your
            Scrollr PostCard. Use it to sanity-check length and composition.
          </div>
        </div>
      </div>
    </div>

    <script>
      const titleInput = document.getElementById("title");
      const authorNameInput = document.getElementById("authorName");
      const categoryInput = document.getElementById("category");
      const bodyInput = document.getElementById("body");
      const imageInput = document.getElementById("imageUrl");
      const creditInput = document.getElementById("credit");
      // readMoreUrl is required in the form, but preview doesn't need its value

      const previewTitle = document.getElementById("preview-title");
      const previewAuthor = document.getElementById("preview-author");
      const previewBody = document.getElementById("preview-body");
      const previewImage = document.getElementById("preview-image");
      const previewCredit = document.getElementById("preview-credit");

      function updatePreview() {
        // Title
        previewTitle.textContent =
          titleInput.value.trim() || "Your title goes here";

        // Author + Category combo line
        const authorName = authorNameInput.value.trim();
        const category = categoryInput.value.trim();

        if (authorName && category) {
          previewAuthor.textContent = `${authorName} · ${category}`;
        } else if (authorName) {
          previewAuthor.textContent = authorName;
        } else if (category) {
          previewAuthor.textContent = category;
        } else {
          previewAuthor.textContent = "Author · Category";
        }

        // Body
        const bodyText = bodyInput.value.trim();
        previewBody.textContent =
          bodyText ||
          "Start typing your explanation on the left. This area will show roughly how much text fits comfortably on a slide.";

        // Image
        const url = imageInput.value.trim();
        if (url) {
          previewImage.src = url;
          previewImage.style.display = "block";
        } else {
          previewImage.removeAttribute("src");
          previewImage.style.display = "none";
        }

        // Credit: only show if non-empty
        const credit = creditInput.value.trim();
        if (credit) {
          previewCredit.textContent = "credit: " + credit;
          previewCredit.classList.remove("hidden");
        } else {
          previewCredit.classList.add("hidden");
        }
      }

      // Hide image if URL is broken
      previewImage.addEventListener("error", () => {
        previewImage.style.display = "none";
      });

      [
        titleInput,
        authorNameInput,
        categoryInput,
        bodyInput,
        imageInput,
        creditInput,
      ].forEach((el) => el.addEventListener("input", updatePreview));

      // Initial state
      updatePreview();

    </script>
  </body>
</html>
